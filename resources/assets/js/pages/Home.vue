<template>
    <main-layout>

                <aside>
                    <div class="panel panel-default">
                        <h1 class="welkom">welkom bij de</h1>

                        <svg class="logobhp" xmlns="http://www.w3.org/2000/svg" width="236" height="260" viewBox="0 0 235.6 260" fill="#000"><path d="M82.4 81.7c0.4 0 0.7-0.3 0.7-0.7V68.7c0-0.4-0.3-0.7-0.7-0.7H64c-0.4 0-0.6-0.3-0.6-0.7V0.6c0-0.4-0.3-0.6-0.7-0.6H50.4c-0.4 0-0.7 0.3-0.7 0.6V81c0 0.4 0.3 0.7 0.7 0.7H82.4z" class="a"/><path d="M40.4 76.4c0.2-0.2 0.5-0.8 0.5-1.1v-28c0-0.4-0.2-0.9-0.5-1.1l-4.9-4.9c-0.3-0.2-0.3-0.7 0-0.9l4.9-4.9c0.2-0.2 0.5-0.8 0.5-1.1v-28c0-0.4-0.2-0.9-0.5-1.1l-4.9-4.9C35.3 0.2 34.8 0 34.4 0H0.7C0.3 0 0 0.3 0 0.6V81c0 0.4 0.3 0.7 0.7 0.7h33.8c0.4 0 0.9-0.2 1.1-0.5L40.4 76.4zM27.2 67.4c0 0.4-0.3 0.7-0.7 0.7H14.3c-0.4 0-0.7-0.3-0.7-0.7V48.3c0-0.4 0.3-0.7 0.7-0.7h12.3c0.4 0 0.7 0.3 0.7 0.7V67.4zM27.2 33.4c0 0.4-0.3 0.7-0.7 0.7H14.3c-0.4 0-0.7-0.3-0.7-0.7V14.3c0-0.3 0.3-0.6 0.7-0.6h12.3c0.4 0 0.7 0.3 0.7 0.6V33.4z" class="a"/><path d="M165.4 29.1c0 0.4-0.3 0.7-0.7 0.7h-12.3c-0.4 0-0.7-0.3-0.7-0.7V0.6c0-0.4-0.3-0.6-0.7-0.6h-12.3c-0.4 0-0.7 0.3-0.7 0.6V81c0 0.4 0.3 0.7 0.7 0.7h12.3c0.4 0 0.7-0.3 0.7-0.7V44c0-0.4 0.3-0.7 0.7-0.7h6.7c0.4 0 0.7 0.3 0.8 0.6l6.9 37c0.1 0.4 0.4 0.6 0.8 0.6h12.5c0.4 0 0.6-0.3 0.5-0.6l-6.9-37c-0.1-0.3 0.1-0.8 0.3-1.1l4.5-4.5c0.3-0.3 0.5-0.8 0.5-1.1V0.6c0-0.4-0.3-0.6-0.6-0.6h-12.3c-0.4 0-0.7 0.3-0.7 0.6V29.1z" class="a"/><path d="M116.2 170.2c0 0.4-0.3 0.7-0.7 0.7h-12.3c-0.4 0-0.7-0.3-0.7-0.7V89.8c0-0.4 0.3-0.6 0.7-0.6h12.3c0.4 0 0.7 0.3 0.7 0.6V170.2z" class="a"/><path d="M27.9 89.1c-0.4 0-0.7 0.3-0.7 0.6v32.7c0 0.4-0.3 0.7-0.7 0.7H14.3c-0.4 0-0.7-0.3-0.7-0.7V89.8c0-0.4-0.3-0.6-0.7-0.6H0.7c-0.4 0-0.7 0.3-0.7 0.6v80.4c0 0.4 0.3 0.7 0.7 0.7H13c0.4 0 0.7-0.3 0.7-0.7v-32.7c0-0.4 0.3-0.7 0.7-0.7h12.3c0.4 0 0.7 0.3 0.7 0.7v32.7c0 0.4 0.3 0.7 0.7 0.7h12.3c0.4 0 0.7-0.3 0.7-0.7V89.8c0-0.4-0.3-0.6-0.7-0.6H27.9z" class="a"/><path d="M235.6 178.9c0-0.4-0.3-0.7-0.7-0.7h-39.5c-0.4 0-0.7 0.3-0.7 0.7v12.3c0 0.4 0.3 0.7 0.7 0.7h12.3c0.4 0 0.7 0.3 0.7 0.7v66.8c0 0.3 0.3 0.7 0.6 0.7h12.3c0.4 0 0.7-0.3 0.7-0.7v-66.8c0-0.4 0.3-0.7 0.7-0.7H235c0.4 0 0.7-0.3 0.7-0.7V178.9z" class="a"/><path d="M149.4 178.3c-0.4 0-0.7 0.3-0.7 0.7v80.4c0 0.3 0.3 0.7 0.7 0.7h12.3c0.4 0 0.7-0.3 0.7-0.7v-31.7c0-0.3 0.3-0.6 0.6-0.6h6.7c0.4 0 0.7 0.3 0.8 0.6l5.5 31.7c0.1 0.4 0.4 0.6 0.8 0.6h12.5c0.4 0 0.6-0.3 0.5-0.6l-5.5-31.7c-0.1-0.3 0.1-0.9 0.4-1.1l4.5-4.5c0.3-0.2 0.5-0.7 0.5-1.1v-36.5c0-0.4-0.2-0.9-0.5-1.1l-4.5-4.5c-0.3-0.3-0.8-0.5-1.1-0.5H149.4zM162.4 192.6c0-0.4 0.3-0.7 0.6-0.7h12.3c0.4 0 0.7 0.3 0.7 0.7v20.1c0 0.4-0.3 0.7-0.7 0.7H163c-0.4 0-0.6-0.3-0.6-0.7V192.6z" class="a"/><path d="M34.8 233c0.4 0 0.9-0.2 1.1-0.5l4.5-4.5c0.2-0.3 0.5-0.8 0.5-1.1v-42.5c0-0.4-0.2-0.9-0.5-1.1l-4.5-4.5c-0.3-0.3-0.8-0.5-1.1-0.5H0.7c-0.4 0-0.7 0.3-0.7 0.7v80.4c0 0.3 0.3 0.7 0.7 0.7H13c0.4 0 0.7-0.3 0.7-0.7v-25.7c0-0.4 0.3-0.6 0.7-0.6H34.8zM13.6 192.6c0-0.4 0.3-0.7 0.7-0.7h12.3c0.4 0 0.7 0.3 0.7 0.7v26.1c0 0.4-0.3 0.7-0.7 0.7H14.3c-0.4 0-0.7-0.3-0.7-0.7V192.6z" class="a"/><path d="M129.8 5.3l-4.8-4.9c-0.3-0.3-0.8-0.5-1.1-0.5h-14 -14c-0.4 0-0.9 0.2-1.1 0.5l-4.8 4.9c-0.3 0.2-0.5 0.7-0.5 1.1v68.9c0 0.4 0.2 0.9 0.5 1.1l4.8 4.9c0.3 0.3 0.8 0.5 1.1 0.5h14 14c0.4 0 0.9-0.2 1.1-0.5l4.8-4.9c0.3-0.2 0.5-0.8 0.5-1.1V6.4C130.3 6.1 130.1 5.6 129.8 5.3zM116.6 67.4c0 0.4-0.3 0.7-0.7 0.7h-6.2 -6.2c-0.4 0-0.7-0.3-0.7-0.7V14.3c0-0.3 0.3-0.6 0.7-0.6h6.2 6.2c0.4 0 0.7 0.3 0.7 0.6V67.4z" class="a"/><path d="M139.8 183.6l-4.9-4.8c-0.2-0.3-0.7-0.5-1.1-0.5h-14 -6.1v13.6h6.1 6.2c0.4 0 0.7 0.3 0.7 0.7v53.2c0 0.4-0.3 0.7-0.7 0.7h-6.2 -6.1V260h6.1 14c0.4 0 0.9-0.2 1.1-0.5l4.9-4.9c0.3-0.2 0.5-0.7 0.5-1.1v-68.8C140.3 184.4 140.1 183.9 139.8 183.6z" class="a"/><path d="M76.3 246.4h-6.2H64c-0.4 0-0.6-0.3-0.6-0.7v-53.2c0-0.4 0.3-0.7 0.6-0.7h6.2 6.2v-13.6h-6.2 -14c-0.4 0-0.9 0.2-1.1 0.5l-4.9 4.8c-0.3 0.3-0.5 0.8-0.5 1.1v68.8c0 0.4 0.2 0.9 0.5 1.1l4.9 4.9c0.3 0.3 0.8 0.5 1.1 0.5h14 6.2V246.4z" class="a"/><path d="M132.4 89.1c-0.4 0-0.9 0.2-1.1 0.5l-4.9 4.8c-0.3 0.3-0.5 0.8-0.5 1.1V126c0 0.4 0.3 0.8 0.6 1l26.1 14.2c0.3 0.2 0.6 0.6 0.6 1v14.5c0 0.4-0.3 0.6-0.6 0.6h-12.3c-0.4 0-0.6-0.3-0.6-0.6v-9.1c0-0.4-0.3-0.7-0.7-0.7h-12.3c-0.4 0-0.7 0.3-0.7 0.7v16.9c0 0.4 0.2 0.9 0.5 1.1l4.9 4.9c0.3 0.3 0.7 0.5 1.1 0.5h28c0.4 0 0.9-0.2 1.1-0.5l4.8-4.9c0.3-0.3 0.5-0.8 0.5-1.1V134c0-0.4-0.3-0.8-0.6-1l-26.1-14.2c-0.3-0.2-0.6-0.6-0.6-1v-14.5 0c0-0.4 0.3-0.7 0.6-0.7h12.3c0.4 0 0.6 0.3 0.6 0.7v9.1c0 0.4 0.3 0.7 0.7 0.7h12.3c0.4 0 0.7-0.3 0.7-0.7v-9.1c0-0.4 0-1 0-1.3v-6.5c0-0.4-0.2-0.8-0.5-1.1l-4.8-4.8c-0.3-0.3-0.8-0.5-1.1-0.5H132.4z" class="a"/><path d="M64.8 157.2c-0.4 0-0.7-0.3-0.7-0.6V89.8c0-0.4-0.3-0.6-0.7-0.6H51.2c-0.4 0-0.7 0.3-0.7 0.6v74.6c0 0.4 0.2 0.9 0.5 1.1l4.9 4.9c0.3 0.3 0.8 0.5 1.1 0.5h14 14c0.4 0 0.9-0.2 1.1-0.5l4.9-4.9c0.3-0.3 0.5-0.8 0.5-1.1V89.8c0-0.4-0.3-0.6-0.7-0.6H78.4c-0.4 0-0.7 0.3-0.7 0.6v66.8c0 0.4-0.3 0.6-0.7 0.6H64.8z" class="a"/></svg>

                        <ul id="calendar">
                            <li class="event" v-for="Event in events" @click="toggleEvent(Event)" v-bind:class="{ active: active == Event }">
                                <div class="event-date-time">
                                    <div class="event-dt-wrap">
                                        <div class="event-date">
                                            {{ Event.date }}
                                        </div>
                                        <div class="event-time">
                                            {{ Event.time }}u
                                        </div>
                                    </div>
                                </div>
                                <div class="event-body">
                                    <h3 class="event-title">
                                        {{ Event.title }}
                                    </h3>
                                    <p class="event-desc">
                                        {{ Event.desc }}
                                    </p>
                                </div>
                                <div class="event-arrow">
                                    <img src="img/event_arrow.png">
                                </div>
                            </li>
                        </ul>
                    </div>

                </aside>

                <section>
                    <div class="overlay">
                        <div class="centered">
                            <div class="row">


                                <h1 class="maptitel">bedrijven &amp; Personen zoeken</h1>
                                    <p class="mapparagraph">Ga verder naar de plattegrond om de locatie te vinden van het bedrijf of persoon waar u naar op zoek bent.</p>

                                    <v-link href="/list" class="btn btn-lg btn-block btn-primary plattegrond-button">Klik hier voor de plattegrond</v-link>

                            </div>
                        </div>
                    </div>
                </section>


    </main-layout>
</template>

<script>
    //console.log(this);
    import MainLayout from '../Main.vue'
    import VLink from '../components/VLink.vue'

    var STORAGE_KEY = 'events-vuejs'
    export default {
        components: {
                MainLayout,
                VLink
        },
        data() {
            return {
                events:[

                ],
                active: ''
            }
        },
        beforeMount() {
            this.events = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
        },
        created() {
           this.getEvents();
           var called = false;
           if(!called) {
                setInterval(function () {
                    this.getEvents();
                    this.toggleEvent();
                }.bind(this), 30000);
                called = true;
           }
        },
        mounted() {
            console.log('Component ready.');
        },
        methods: {
            getEvents: function () {
                this.$http.get('/api/events').then((response) => {

                this.events = response.body;
                localStorage.setItem(STORAGE_KEY, JSON.stringify(this.events));

                }, (response) => {
                    console.error('Hij doet het niet');
                });
            },
            toggleEvent: function (event) {
                if(this.active == event) {
                    this.active == '';
                } else {
                    this.active = event;
                }

            }
        },
    }
</script>
